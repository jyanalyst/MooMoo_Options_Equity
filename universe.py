"""
Pre-defined stock universes for Options Scanner
AUTO-GENERATED by universe_builder.py on 2026-01-16 01:51:30
Next scheduled refresh: 2026-01-30

Fundamental screening criteria applied:
- Market Cap >$10B
- P/E >0 (Profitable)
- Operating Margin >0%
- Debt/Equity <1.0
- ROE >10%
- Current Ratio >1.5
- Gross Margin >0%
- Institutional Ownership >20%
- Avg Volume >1M shares/day
- Excluded: Biotech stocks

Quality scoring method: PERCENTILE-BASED RANKING
Stocks ranked relative to each other within filtered cohort:
- Operating Margin: 30% weight (percentile rank)
- ROE: 25% weight (percentile rank)
- Volume: 15% weight (percentile rank)
- Current Ratio: 15% weight (percentile rank)
- Debt/Equity: 10% weight (inverse percentile - lower is better)
- Gross Margin: 5% weight (percentile rank bonus)
Total possible: 100 points

Stocks screened: 20
Quality stocks found: 15
Top 20 selected per tier by quality score
"""

# =============================================================================
# WHEEL STRATEGY UNIVERSE
# Quality stocks you would genuinely own at the strike price
# Pre-screened for: Market Cap >$10B, profitable, strong fundamentals
# =============================================================================

WHEEL_TIER_1 = [
# $15-70 range - 5 stocks - START HERE
    "CPRT",  # Copart, Inc - Industrials | Score: 67.7 | Earnings: Feb 20
    "CDE",  # Coeur Mining Inc - Basic Materials | Score: 59.7 | Earnings: Feb 19
    "BF-B",  # Brown-Forman Corp - Consumer Defensive | Score: 54.3 | Earnings: Mar 04
    "CART",  # Maplebear Inc - Consumer Cyclical | Score: 43.0 | Earnings: Feb 24
    "AA",  # Alcoa Corp - Basic Materials | Score: 31.3 | Earnings: Jan 23
]

WHEEL_TIER_2 = [
# $15-150 range - 6 stocks - AFTER 6 MONTHS EXPERIENCE
    "ANET",  # Arista Networks Inc - Technology | Score: 85.0 | Earnings: Feb 25
    "CF",  # CF Industries Holdings Inc - Basic Materials | Score: 56.3 | Earnings: Nov 06
    "ABT",  # Abbott Laboratories - Healthcare | Score: 53.0 | Earnings: Jan 22
    "AOS",  # A.O. Smith Corp - Industrials | Score: 43.3 | Earnings: Jan 29
    "A",  # Agilent Technologies Inc - Healthcare | Score: 42.3 | Earnings: Nov 25
    "BSX",  # Boston Scientific Corp - Healthcare | Score: 32.7 | Earnings: Feb 04
]

WHEEL_TIER_3 = [
# $15-150+ range - 4 stocks - CAPITAL >$150K
    "COIN",  # Coinbase Global Inc - Financial | Score: 78.0 | Earnings: Oct 31
    "APH",  # Amphenol Corp - Technology | Score: 65.0 | Earnings: Jan 28
    "ALAB",  # Astera Labs Inc - Technology | Score: 46.7 | Earnings: Feb 11
    "CHRW",  # C.H. Robinson Worldwide, Inc - Industrials | Score: 31.7 | Earnings: Jan 29
]

# Combined Wheel universe - use based on your capital tier
WHEEL_UNIVERSE = WHEEL_TIER_1 + WHEEL_TIER_2  # Tier 3 excluded by default (capital intensive)


# =============================================================================
# VOLATILITY HARVESTING UNIVERSE
# [PRESERVED FROM EXISTING FILE - DO NOT MODIFY]
# =============================================================================

VOL_HARVEST_UNIVERSE = [
    # Meme stocks / high retail interest
    "GME",    # GameStop - original meme stock
    "AMC",    # AMC Entertainment - meme stock
    "KOSS",   # Koss - headphones, squeeze history
    
    # Crypto miners / high correlation to BTC
    "MARA",   # Marathon Digital - Bitcoin miner
    "RIOT",   # Riot Platforms - Bitcoin miner
    "CLSK",   # CleanSpark - Bitcoin miner
    "HUT",    # Hut 8 Mining
    "BITF",   # Bitfarms
    
    # High short interest / squeeze potential
    "CVNA",   # Carvana - high short interest
    "UPST",   # Upstart - AI lending, volatile
    "AFRM",   # Affirm - BNPL, volatile
    "PLUG",   # Plug Power - hydrogen
    "FCEL",   # FuelCell Energy
    
    # Other high-IV names
    "HOOD",   # Robinhood (appears in both - context dependent)
    "CLOV",   # Clover Health
    "IONQ",   # IonQ - quantum computing
    "SMCI",   # Super Micro Computer - AI servers
]


# =============================================================================
# EXCLUDED TICKERS
# [PRESERVED FROM EXISTING FILE - DO NOT MODIFY]
# =============================================================================

EXCLUDED_TICKERS = [
    # Biotech with pending FDA decisions (add as needed)
    # M&A targets (add as needed)
    # Delisting candidates (add as needed)
]


# =============================================================================
# HELPER FUNCTIONS
# [PRESERVED FROM EXISTING FILE - DO NOT MODIFY]
# =============================================================================

# =============================================================================
# HELPER FUNCTIONS
# =============================================================================

def get_wheel_universe(tier: int = 2) -> list:
    """
    Get Wheel universe based on capital tier
    Tier 1: $15-70 stocks only
    Tier 2: $15-150 stocks (Tier 1 + Tier 2)
    Tier 3: All stocks including $150+ (requires >$150K capital)
    """
    if tier == 1:
        return WHEEL_TIER_1
    elif tier == 2:
        return WHEEL_TIER_1 + WHEEL_TIER_2
    elif tier == 3:
        return WHEEL_TIER_1 + WHEEL_TIER_2 + WHEEL_TIER_3
    else:
        return WHEEL_TIER_1 + WHEEL_TIER_2


def get_vol_harvest_universe() -> list:
    """Get Volatility Harvesting universe"""
    return [t for t in VOL_HARVEST_UNIVERSE if t not in EXCLUDED_TICKERS]


def add_to_excluded(ticker: str):
    """Add a ticker to excluded list (runtime only)"""
    if ticker not in EXCLUDED_TICKERS:
        EXCLUDED_TICKERS.append(ticker)


def format_moomoo_symbol(ticker: str) -> str:
    """Convert ticker to MooMoo format (e.g., 'AAPL' -> 'US.AAPL')"""
    if not ticker.startswith("US."):
        return f"US.{ticker}"
    return ticker


def strip_moomoo_prefix(symbol: str) -> str:
    """Convert MooMoo format to plain ticker (e.g., 'US.AAPL' -> 'AAPL')"""
    if symbol.startswith("US."):
        return symbol[3:]
    return symbol









